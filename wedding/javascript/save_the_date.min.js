var save_the_date={defaults:{weddingDate:"",labels:["days","hours","minutes","secs"],sendServerMessages:["Thank you.","Sorry, your message could not be sent due to an error."],gallery:[],titles:[]},option:{},init:function(c){var i=this;i.option=$.extend({},i.defaults,c);if(i.option.weddingDate!==""){i.weddingDate=new Date(i.option.weddingDate);i.setCountDown();i.days=$("#days");i.hours=$("#hours");i.minutes=$("#minutes");i.seconds=$("#seconds");i.doCountDown()}if(i.option.gallery.length>0){i.openGallery()}$("#full-menu").on("click",function(){$(this).parent(".nav").toggleClass("full");return false});var g;$(".to-scroll").bind("click",function(k){k.preventDefault();var j=$(this);$(".active").removeClass("active");j.addClass("active");if(a&&$(window).width()>1023&&$(window).height()>829){switch(j.attr("href")){case"#top":g=0;break;case"#about":g=e;break;default:g=$(j.attr("href")).offset().top-88}$("html, body").stop().animate({scrollTop:g})}else{if(a&&$(window).width()>767){$("html, body").stop().animate({scrollTop:$(j.attr("href")).offset().top-88})}else{$("html, body").stop().animate({scrollTop:$(j.attr("href")).offset().top},1500)}}});$(window).load(function(){$(".flexslider").flexslider({prevText:"&lsaquo;",nextText:"&rsaquo;",controlNav:false})});$(".map").click(function(){if($(window).height()-$(this).offset().top+$(window).scrollTop()<380){$("html, body").stop().animate({scrollTop:430-$(window).height()+$(this).offset().top},500)}var m,n=$(this).attr("data-lat"),l=$(this).attr("data-lng"),k=$(this).attr("data-title");$(this).next(".my_map").fadeIn(1500);var j=$(this).next(".my_map").children("div").attr("id");m=new GMaps({el:j,lat:n,lng:l});m.addMarker({lat:n,lng:l,title:k})});var a=!(Modernizr.touch),b=92,d,e;var h=function(){var j=$(window).scrollTop();$(".header h2").css("opacity",(d-0.75*j)/d);if(j>e){$(".header").removeClass("fixed").addClass("scrolled").css("top",e+b)}else{$(".header").addClass("fixed").removeClass("scrolled").css("top",b)}};var f=function(){d=parseInt($("h1").css("height"),10)+parseInt($(".images").css("height"),10)+b+2*32+16,e=parseInt($(".content").css("top"),10)-d;if(a&&$(window).width()>1023&&$(window).height()>830){$(".header").removeClass("wide-short");if($(window).scrollTop()<=e){$(".header").removeClass("scrolled").addClass("fixed").css("top",b)}else{$(".header").removeClass("fixed").addClass("scrolled").css("top",e+b)}$(window).bind("scroll",h)}else{$(window).unbind("scroll",h);$(".header h2").css("opacity",1);if(a&&$(window).width()>767){$(".header").removeClass("fixed").removeClass("scrolled").addClass("wide-short")}}};$(window).resize(function(){f()});f();i.rsvp()},openGallery:function(){var a=this;$(document).on("click","#gallery",function(){var b=[];$(a.option.gallery).each(function(c,d){b[c]={href:d,title:a.option.titles[c]}});$.fancybox.open(b);$(".active").removeClass("active");$("#gallery").addClass("active");return false})},setCountDown:function(){var b=this;var c=new Date();b.secondsDiff=Math.floor((b.weddingDate.getTime()-c.getTime())/1000);var a='in <span id="days"></span> '+b.option.labels[0]+'  <span id="hours"></span> '+b.option.labels[1]+'  <span id="minutes"></span> '+b.option.labels[2]+'  <small><span id="seconds"></span> '+b.option.labels[3]+"</small>";$("#timer").html(a)},doCountDown:function(){var a=this;var b=function(){setTimeout(function(){requestAnimationFrame(b);var d=new Date(),h=Math.floor((a.weddingDate.getTime()-d.getTime())/1000);var f=h,e=Math.floor(f/60),c=Math.floor(e/60),g=Math.floor(c/24);c%=24;e%=60;f%=60;a.days.html(Math.max(g,0));a.hours.html(Math.max(c,0));a.minutes.html(Math.max(e,0));a.seconds.html(Math.max(f,0))},1000)};b()},rsvp:function(){var b=this;$("#check-reception:checked").parent().parent().next("#guests").show();$("#check-reception").change(function(){$("#guests").slideToggle("slow")});if(!Modernizr.input.placeholder){var a=["#name","#email","textarea","#adults","#children"];$(a).each(function(c,d){$(d).val($(d).attr("placeholder"))})}$("#rsvp form").submit(function(){var f=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;var k=$("#email").val(),d=$("#name").val(),h=$("#check-reception").is(":checked"),j=$("#adults").val(),c=false;$(".error").removeClass("error");if(h){if(j!==undefined&&(j===""||j===$("#adults").attr("placeholder"))){$("#adults").addClass("error");c=true}}if(d===""||d===$("#name").attr("placeholder")){$("#name").addClass("error");c=true}if((k==="")||(f.test(k)===false)){$("#email").addClass("error");c=true}if(!(c)){var e=$(this);var g=$(e).serialize(),i=$("#note");$.ajax({type:"POST",url:"/sendmail",data:g,success:function(m,o,n){var l="";switch(m){case"success":$(e).hide();$("html, body").animate({scrollTop:$(document).height()},"slow");l=b.option.sendServerMessages[0];break;case"error":l=b.option.sendServerMessages[1];break}i.html(l)},error:function(l,n,m){result=b.option.sendServerMessages[1]}});return false}return false})}};(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());